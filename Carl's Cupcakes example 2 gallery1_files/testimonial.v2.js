define("testimonialv2",["jquery","backbone","utility"],function(a,b,c){window.MOBILE=navigator.userAgent.match(/mobile/i);var d=b.View.extend({defaultOptions:{SitePageModuleID:null,isAIEditor:null,slideDuration:"5000",speed:500,arrowRight:".right-arrow",arrowLeft:".left-arrow",isRunning:true},initials:{currentSlide:0,$currentSlide:null,totalSlides:false,cssTransitions:false},events:function(){return MOBILE?{"click .right-arrow":"rightArrowClick","click .left-arrow":"leftArrowClick"}:{"click .right-arrow":"rightArrowClick","click .left-arrow":"leftArrowClick","mouseover .testimonial-ul":"clearTimer","mouseout .testimonial-ul":"startTimer"}},render:function(){var f=this;f.build();f.activate();f.initTimer();return f},initialize:function(g){var f=this;f.options=_.extend({},f.defaultOptions,g);f.initials=_.extend(f,f.initials);f.setElement(".mod-testimonial-"+f.options.SitePageModuleID);f.render()},build:function(){var f=this;f.totalSlides=f.$el.find(".testimonial-slide").length;a(window).on("resize",function(){var g=0;f.$el.find(".testimonial-ul li").each(function(j,h){if(a(h).height()>g){g=a(h).height()}});f.$el.find(".testimonial-ul").height(g);f.$el.height(g+f.$el.find(".mod-header-testimonial").height())}).resize()},activate:function(){var f=this;f.$currentSlide=f.$el.find(".testimonial-slide").eq(0).addClass("active")},clearTimer:function(){var f=this;if(f.timer){clearInterval(f.timer);f.throttle=true}},initTimer:function(){var f=this;if(f.options.isAIEditor=="0"){f.timer=window.setInterval(function(){f.changeSlide()},f.options.slideDuration)}},startTimer:function(){var f=this;f.initTimer();f.throttle=false},rightArrowClick:function(j){var k=this;var h="right";var g=this._next(j,h);if(!g){return}var f=k.$el.find(".testimonial-slide").eq(k.currentSlide).addClass(h+" active");k._jsAnimation(f,h);k.clearTimer();k.startTimer()},leftArrowClick:function(j){var k=this;var h="left";var g=this._next(j,h);if(!g){return}var f=k.$el.find(".testimonial-slide").eq(k.currentSlide).addClass(h+" active");k._jsAnimation(f,h);k.clearTimer();k.startTimer()},changeSlide:function(j){var k=this;var h=k._direction(j);var g=k._next(j,h);if(!g){return}var f=k.$el.find(".testimonial-slide").eq(k.currentSlide).addClass(h+" active");k._jsAnimation(f,h)},_direction:function(g){var f;if(typeof g!=="undefined"){f=(typeof g.data==="undefined"?"right":g.data.direction)}else{f="right"}return f},_next:function(g,f){var h=this;switch(true){case (typeof index!=="undefined"):if(h.currentSlide==index){this.startTimer();return false}h.currentSlide=index;break;case (f=="right"&&h.currentSlide<(h.totalSlides-1)):h.currentSlide++;break;case (f=="right"):h.currentSlide=0;break;case (f=="left"&&h.currentSlide===0):h.currentSlide=(h.totalSlides-1);break;case (f=="left"):h.currentSlide--;break}return this},_jsAnimation:function(f,j){var k=this;if(k.options.isRunning){k.$el.find(".testimonialArrow").css({"pointer-events":"none"});k.options.isRunning=false;k.throttle=true;if(j=="right"){k.$currentSlide.addClass("js-reset-left")}var g={};g[j]="0%";var h={};h[j]="100%";k.$currentSlide.animate(h,this.options.speed);f.animate(g,k.options.speed,"swing",function(){k.$currentSlide.removeClass("active js-reset-left").attr("style","");k.$currentSlide=f.removeClass(j).attr("style","");k.options.isRunning=true;k.$el.find(".testimonialArrow").css({"pointer-events":""})})}},destroy:function(){var f=this;f.remove()}});return d});