define("footerv1",["jquery","backbone","utility","data","modal"],function(a,b,d,f,e){var c=b.View.extend({el:null,defaultOptions:{SitePageModuleID:null,locationList:null,HasAnimation:0,IsPublish:0},events:{"click .back-to-top,.newScrollToTop,.scrollToTop":"scrollTop","click .footer-page-overlay":"loadOverlay"},initialize:function(){var g=this;g.options=_.extend({},g.defaultOptions,g.options)},render:function(){var g=this;if(g.$el.find("[id$=mapLocations]").length>0){g.LoadMapUrl()}if(g.options.HasAnimation===1){g.isScrolledIntoView();a(window).scroll(function(){g.isScrolledIntoView()})}},isScrolledIntoView:function(){var k=this;var i,m,l,h,g,j=null;i=k.$el;m=a(window).height();l=a(window).scrollTop();h=l+1;g=h+m;j=a(i).offset().top;if(j>h&&j<g){a(i).addClass("animated")}},LoadMapUrl:function(){var j=this;var l="";var h=a(".subnavContainer").height();var i=a(".subnavContainer").width();var g=i/h;l=j.$el.find("[id$=mapLocations]").data("map-url")+"&size=640x"+parseInt(640/g);var k=a("<div></div>").css("background","url('"+l+"') no-repeat");a(k).css("background-size","cover");k.addClass("parent-subnavContainer");if(a(".subnavContainer").hasClass("footer-fixed")){a(".subnavContainer").removeClass("footer-fixed");k.addClass("parent-footer-fixed")}a(".subnavContainer").wrap(k)},scrollTop:function(){a("html, body").animate({scrollTop:0},1000);if("FB" in window){FB.Canvas.scrollTo(0,0)}},loadOverlay:function(h){var i=this,g=a(h.currentTarget);i.loadModule(i.options.IsPublish,g.data("href"),0,parseInt(g.data("width")),0,parseInt(g.data("close")),i.options.SitePageModuleID)},loadModule:function(k,m,j,n,l,i,h){var g=this;a("body").attr("sitepagemoduleid",h);if(!d.isBlank(m)){g.OpenCounter=window.setTimeout(function(){g.Overlay=new e({modalType:"dialog",autoOpen:true,showOverlay:true,title:"",subtitle:"",description:"",width:(parseInt(a(window).width(),10)*parseInt(n,10)/100),className:"overlay-v1",buttons:[],content:{url:window.location.protocol+"//"+window.location.host+"/bot.ashx?url="+decodeURIComponent((k===0)?window.location.protocol+"//"+window.location.host+"/"+m:window.location.protocol+"//"+m),datatype:"html",onSuccess:function(p,o){o.el.html(p)},onError:function(p,o){g.Overlay.doClose()}},afterContentLoad:function(){if(i>0){g.CloseCounter=window.setTimeout(function(){g.Overlay.doClose()},(parseInt(i,10)*1000))}}})},(parseInt(l,10)*1000))}}});return c});