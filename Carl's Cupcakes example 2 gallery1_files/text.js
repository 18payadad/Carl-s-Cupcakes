define(["module"],function(l){var n,h,c,d,m=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,j=typeof location!=="undefined"&&location.href,g=j&&location.protocol&&location.protocol.replace(/\:/,""),e=j&&location.hostname,f=j&&(location.port||undefined),b=[],k=(l.config&&l.config())||{};n={version:"2.0.6",strip:function(p){if(p){p=p.replace(o,"");var q=p.match(a);if(q){p=q[1]}}else{p=""}return p},jsEscape:function(p){return p.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:k.createXhr||function(){var s,q,r;if(typeof XMLHttpRequest!=="undefined"){return new XMLHttpRequest()}else{if(typeof ActiveXObject!=="undefined"){for(q=0;q<3;q+=1){r=m[q];try{s=new ActiveXObject(r)}catch(p){}if(s){m=[r];break}}}}return s},parseName:function(t){var s,p,v,u=false,q=t.indexOf("."),r=t.indexOf("./")===0||t.indexOf("../")===0;if(q!==-1&&(!r||q>1)){s=t.substring(0,q);p=t.substring(q+1,t.length)}else{s=t}v=p||s;q=v.indexOf("!");if(q!==-1){u=v.substring(q+1)==="strip";v=v.substring(0,q);if(p){p=v}else{s=v}}return{moduleName:s,ext:p,strip:u}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(w,s,p,r){var v,t,u,q=n.xdRegExp.exec(w);if(!q){return true}v=q[2];t=q[3];t=t.split(":");u=t[1];t=t[0];return(!v||v===s)&&(!t||t.toLowerCase()===p.toLowerCase())&&((!u&&!t)||u===r)},finishLoad:function(q,s,p,r){p=s?n.strip(p):p;if(k.isBuild){b[q]=p}r(p)},load:function(q,u,s,p){if(p.isBuild&&!p.inlineText){s();return}k.isBuild=p.isBuild;var t=n.parseName(q),r=t.moduleName+(t.ext?"."+t.ext:""),v=u.toUrl(r),w=(k.useXhr)||n.useXhr;if(!j||w(v,g,e,f)){n.get(v,function(x){n.finishLoad(q,t.strip,x,s)},function(x){if(s.error){s.error(x)}})}else{u([r],function(x){n.finishLoad(t.moduleName+"."+t.ext,t.strip,x,s)})}},write:function(s,r,t,p){if(b.hasOwnProperty(r)){var q=n.jsEscape(b[r]);t.asModule(s+"!"+r,"define(function () { return '"+q+"';});\n")}},writeFile:function(v,s,w,x,p){var u=n.parseName(s),q=u.ext?"."+u.ext:"",t=u.moduleName+q,r=w.toUrl(u.moduleName+q)+".js";n.load(t,w,function(z){var y=function(A){return x(r,A)};y.asModule=function(B,A){return x.asModule(B,r,A)};n.write(v,t,y,p)},p)}};if(k.env==="node"||(!k.env&&typeof process!=="undefined"&&process.versions&&!!process.versions.node)){h=require.nodeRequire("fs");n.get=function(r,p){var q=h.readFileSync(r,"utf8");if(q.indexOf("\uFEFF")===0){q=q.substring(1)}p(q)}}else{if(k.env==="xhr"||(!k.env&&n.createXhr())){n.get=function(t,p,q,s){var u=n.createXhr(),r;u.open("GET",t,true);if(s){for(r in s){if(s.hasOwnProperty(r)){u.setRequestHeader(r.toLowerCase(),s[r])}}}if(k.onXhr){k.onXhr(u,t)}u.onreadystatechange=function(w){var x,v;if(u.readyState===4){x=u.status;if(x>399&&x<600){v=new Error(t+" HTTP status: "+x);v.xhr=u;q(v)}else{p(u.responseText)}if(k.onXhrComplete){k.onXhrComplete(u,t)}}};u.send(null)}}else{if(k.env==="rhino"||(!k.env&&typeof Packages!=="undefined"&&typeof java!=="undefined")){n.get=function(x,p){var w,u,r="utf-8",s=new java.io.File(x),v=java.lang.System.getProperty("line.separator"),t=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),r)),q="";try{w=new java.lang.StringBuffer();u=t.readLine();if(u&&u.length()&&u.charAt(0)===65279){u=u.substring(1)}w.append(u);while((u=t.readLine())!==null){w.append(v);w.append(u)}q=String(w.toString())}finally{t.close()}p(q)}}else{if(k.env==="xpconnect"||(!k.env&&typeof Components!=="undefined"&&Components.classes&&Components.interfaces)){c=Components.classes,d=Components.interfaces;Components.utils["import"]("resource://gre/modules/FileUtils.jsm");n.get=function(v,p){var t,q,u={},s=new FileUtils.File(v);try{t=c["@mozilla.org/network/file-input-stream;1"].createInstance(d.nsIFileInputStream);t.init(s,1,0,false);q=c["@mozilla.org/intl/converter-input-stream;1"].createInstance(d.nsIConverterInputStream);q.init(t,"utf-8",t.available(),d.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER);q.readString(t.available(),u);q.close();t.close();p(u.value)}catch(r){throw new Error((s&&s.path||"")+": "+r)}}}}}}return n});