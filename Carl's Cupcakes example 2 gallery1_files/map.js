define("map",["module","jquery","backbone","utility","googlemap3"],function(f,a,b,e,c){var d=b.View.extend({isDevelopment:f.config().isDevelopment,template:"",CustomMapTypeID:"Mopro",map:null,objMarkerImage:null,objInfoWindow:null,objInfoBox:null,objGeocoder:null,objBound:null,markers:[],defaultOptions:{Zoom:6,MinZoom:3,MaxZoom:19,MapType:google.maps.MapTypeId.ROADMAP,MapStyle:e.MapStyleType.Original,Marker:{url:"https://www.google.com/mapfiles/marker.png",size:{width:20,height:34}}},initialize:function(){var g=this;g.options=a.extend(true,{},g.defaultOptions,g.options);g.init()},init:function(){var g=this;g.objMarkerImage=new google.maps.MarkerImage(g.options.Marker.url,new google.maps.Size(g.options.Marker.size.width,g.options.Marker.size.height));g.objInfoWindow=new google.maps.InfoWindow();g.objGeocoder=new google.maps.Geocoder();g.objBound=new google.maps.LatLngBounds();g.bindEvent()},bindEvent:function(){var g=this},resize:function(g){var j=(!e.isBlank(g))?g.data.me:this,i=a(window).height();if(i>582){j.$el.css({height:582})}else{j.$el.css({height:i-20})}},render:function(g){var i=this;if(_.isElement(i.$el[0])){i.loadActivityIndicator();var j=new google.maps.LatLng(39.5,-98.34999999999999);var h={zoom:i.options.Zoom,minZoom:i.options.MinZoom,maxZoom:i.options.MaxZoom,center:j,scrollwheel:false,disableDefaultUI:false,mapTypeControl:false,rotateControl:true,rotateControlOptions:{position:google.maps.ControlPosition.TOP_LEFT},zoomControl:true,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.TOP_LEFT},scaleControl:true,scaleControlOptions:{position:google.maps.ControlPosition.TOP_LEFT},streetViewControl:true,streetViewControlOptions:{position:google.maps.ControlPosition.TOP_LEFT},mapTypeId:i.options.MapType};i.map=new google.maps.Map(i.$el[0],h);var k=i.setStyles();google.maps.event.addListenerOnce(i.map,"idle",function(){i.activityCounter=window.setTimeout(function(){i.$el.ActivityIndicator("destroy")},500);if(a.isFunction(g)){g()}})}else{i.log("Couldm't find any element ot render the map")}return i},loadActivityIndicator:function(){var g=this;if(g.options.MapStyle===e.MapStyleType.Dark){g.$el.ActivityIndicator({color:"#ffffff"})}else{g.$el.ActivityIndicator()}},addMarker:function(j,g){var i=this;if(!e.isBlank(j.Latitude)||!e.isBlank(j.Longitude)){var k=new google.maps.LatLng(j.Latitude,j.Longitude);var h=new google.maps.Marker({position:k,draggable:false,icon:i.objMarkerImage,animation:google.maps.Animation.DROP,map:i.map});i.objBound.extend(k);i.map.setCenter(i.objBound.getCenter());h.set("data",j);i.markers.push(h);if(a.isFunction(g)){g(h)}return h}else{i.getLatLng(j,function(l){var n=new google.maps.LatLng(l.Latitude,l.Longitude);var m=new google.maps.Marker({position:n,draggable:false,icon:i.objMarkerImage,animation:google.maps.Animation.DROP,map:i.map});i.objBound.extend(n);i.map.fitBounds(i.objBound);m.set("data",j);i.markers.push(m);if(a.isFunction(g)){g(m)}});return null}},setCenter:function(j,k,l){var i=window.parseInt(l,10);var g=parseFloat(j);var h=parseFloat(k);if(e.isNumber(i)&&e.isNumber(g)&&e.isNumber(h)){me.map.setZoom(l);me.map.panTo(new google.maps.LatLng(g,h))}},getLatLng:function(i,h){var j=this;if(!e.isBlank(j.objGeocoder)){var g=i.Address+", "+i.City+", "+i.State+" "+i.Zip;if(a.isFunction(h)){j.objGeocoder.geocode({address:g},function(k,l){if(l==google.maps.GeocoderStatus.OK){if(l!=google.maps.GeocoderStatus.ZERO_RESULTS){if(a.isFunction(h)){h({Latitude:k[0].geometry.location.lat(),Longitude:k[0].geometry.location.lng()})}}else{if(a.isFunction(h)){h({Latitude:0,Longitude:0})}}}else{if(a.isFunction(h)){h({Latitude:0,Longitude:0})}}})}}else{if(a.isFunction(h)){h({Latitude:0,Longitude:0})}}},setStyles:function(){var g=this;switch(g.options.MapStyle){case 0:g.objMarkerImage=new google.maps.MarkerImage("https://www.google.com/mapfiles/marker.png",new google.maps.Size(20,34));break;case e.MapStyleType.Original:g.objMarkerImage=new google.maps.MarkerImage("https://www.google.com/mapfiles/marker.png",new google.maps.Size(20,34));break;case e.MapStyleType.Light:var j=new google.maps.StyledMapType([{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:0.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}],{name:"Mopro Light"});g.map.mapTypes.set(g.CustomMapTypeID,j);g.map.setMapTypeId(g.CustomMapTypeID);break;case e.MapStyleType.Greyscale:var i=new google.maps.StyledMapType([{featureType:"all",elementType:"all",stylers:[{saturation:-100},{gamma:0.5}]}],{name:"Mopro Greyscale"});g.map.mapTypes.set(g.CustomMapTypeID,i);g.map.setMapTypeId(g.CustomMapTypeID);break;case e.MapStyleType.Dark:var h=new google.maps.StyledMapType([{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:0.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]}],{name:"Mopro Dark"});g.map.mapTypes.set(g.CustomMapTypeID,h);g.map.setMapTypeId(g.CustomMapTypeID);break;default:g.objMarkerImage=new google.maps.MarkerImage("https://www.google.com/mapfiles/marker.png",new google.maps.Size(20,34));break}},log:function(h){var g=this;if(g.isDevelopment&&console){console.log(h)}},destroy:function(){var g=this;g.remove()}});return d});